parameters:
  cache_key_prefix:
    description: prefix of cache key
    type: string
    default: redmine-plugin-commands-download-
  redmine_version:
    description: version of Redmine
    type: string
  after-download:
    description: steps to run after download command.
    type: steps
    default: []

executor: downloader

working_directory: /tmp

steps:
  - download:
      cache_key_prefix: << parameters.cache_key_prefix >>
      redmine_version: << parameters.redmine_version >>
      destination: ~/project
  - steps: << parameters.after-download >>
  - persist_to_workspace:
      root: '~/project'
      paths: ['*']
