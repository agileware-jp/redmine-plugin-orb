description: Download Redmine << parameters.redmine_version >>
parameters:
  redmine_version:
    description: version of Redmine
    type: string
steps:
  - restore_cache:
      keys:
        - '{{ .Environment.CACHE_VERSION }}-redmine-download-<< parameters.redmine_version >>'
  - run:
      name: Download Redmine << parameters.redmine_version >>
      working_directory: '~/'
      command: |
        set -e
        if [ ! -d ~/redmine-<< parameters.redmine_version >> ]; then
          curl https://redmine.org/releases/redmine-<< parameters.redmine_version >>.tar.gz | tar zx
        fi
  - save_cache:
      key: '{{ .Environment.CACHE_VERSION }}-redmine-download-<< parameters.redmine_version >>'
      paths: ~/redmine-<< parameters.redmine_version >>
